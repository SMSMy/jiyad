# ุจุฑูููุช ุฅุถุงูู: ุชูุนูู ูุธุงู ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ (OTA Updates)

---

## ๐ฏ ุงููุฏู ูู ูุฐู ุงููุฑุญูุฉ

ุฅุถุงูุฉ ููุฒุฉ **ุงูุชุญุฏูุซ ุงูุชููุงุฆู** ูุชุทุจูู ุฌูุงุฏ ุจุญูุซ:

- ุงููุณุชุฎุฏููู ูุชูููู ุฅุดุนุงุฑุงู ุนูุฏ ุชููุฑ ูุณุฎุฉ ุฌุฏูุฏุฉ
- ุงูุชุญุฏูุซ ูุชู ุนุจุฑ GitHub Releases (ูุฌุงูุงู)
- ูุง ุญุงุฌุฉ ููุชุฌุฑ Google Play
- ุงูููุฏ ูุนุฒูู ุชูุงูุงู ูู ูุฌูุฏ `simple/` (Fork ุงูุฌุฑุงุญู)

---

## ๐ ุงููุจุฏุฃ ุงูุชููู

### ููู ูุนูู ุงููุธุงูุ

```
ุงูุชุทุจูู ุนูุฏ ุงููุชุญ
       โ
ูุชุตู ุจู GitHub API
       โ
ููุฑุฃ ุขุฎุฑ Release ููุดูุฑ
       โ
ููุงุฑู ุฑูู ุงูุฅุตุฏุงุฑ (versionName)
       โ
ุฅุฐุง ูุงู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ุฃุนูู
       โ
ูุนุฑุถ ูุงูุฐุฉ ููุจุซูุฉ ูููุณุชุฎุฏู
       โ
ุงููุณุชุฎุฏู ูุถุบุท "ุชุญุฏูุซ ุงูุขู"
       โ
ููุชุญ ุฑุงุจุท ุงูุชุญููู ูู GitHub
       โ
ุงููุณุชุฎุฏู ูุซุจุช ุงูุชุญุฏูุซ
```

---

## โ ุงูููุงู ุงููุทููุจุฉ ุจุงูุชูุตูู

### ุงููุฑุญูุฉ 1: ุฅูุดุงุก ููู ุงูููุญุฏูุซ

#### 1.1 ุฅูุดุงุก `SimpleAppUpdater.kt`

**ุงููููุน:** `app/src/main/java/com/junkfood/seal/simple/SimpleAppUpdater.kt`

**ุงููุฏู:**

- ูุญุต GitHub ููุจุญุซ ุนู ุชุญุฏูุซุงุช
- ููุงุฑูุฉ ุฑูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูุน ุงูุฃุญุฏุซ
- ุชูููุฑ ุฑุงุจุท ุงูุชุญููู ูููุณุชุฎุฏู

**ุงููุธุงุฆู ุงููุทููุจุฉ:**

```kotlin
object SimpleAppUpdater {
    // ุฑุงุจุท GitHub API
    private const val GITHUB_API_URL = "https://api.github.com/repos/USERNAME/REPO/releases/latest"

    // ูุญุต ุงูุชุญุฏูุซุงุช
    suspend fun checkForUpdate(): UpdateInfo

    // ููุงุฑูุฉ ุงูุฅุตุฏุงุฑุงุช
    private fun isNewerVersion(current: String, latest: String): Boolean

    // ูุชุญ ุฑุงุจุท ุงูุชุญููู
    fun openDownloadLink(context: Context, url: String)
}

data class UpdateInfo(
    val hasUpdate: Boolean,
    val latestVersion: String,
    val downloadUrl: String,
    val releaseNotes: String
)
```

**ุงูุชูุงุตูู ุงููููุฉ:**

1. **ุฑุงุจุท GitHub API:**

   ```
   ุงุณุชุจุฏู USERNAME ู REPO ุจุงุณู ูุณุชุฎุฏูู ูุงุณู ุงููุณุชูุฏุน
   ูุซุงู: "https://api.github.com/repos/ahmed/jiyad/releases/latest"
   ```

2. **ูุฑุงุกุฉ ุงูุจูุงูุงุช:**
   - ููุฑุฃ `tag_name` (ูุซูุงู: "v1.2.0")
   - ููุฑุฃ `assets[0].browser_download_url` (ุฑุงุจุท ุงูู APK)
   - ููุฑุฃ `body` (ููุงุญุธุงุช ุงูุฅุตุฏุงุฑ)

3. **ุงูููุงุฑูุฉ:**
   - `BuildConfig.VERSION_NAME` = ุงูุฅุตุฏุงุฑ ุงูุญุงูู
   - `tag_name` ูู GitHub = ุงูุฅุตุฏุงุฑ ุงูุฃุญุฏุซ
   - ุฅุฐุง ูุฎุชูููู โ ููุฌุฏ ุชุญุฏูุซ

---

### ุงููุฑุญูุฉ 2: ุฑุจุท ุงูููุญุฏูุซ ุจุงููุงุฌูุฉ

#### 2.1 ุชุนุฏูู `SimpleHomeScreen.kt`

**ุงููููุน:** `app/src/main/java/com/junkfood/seal/simple/SimpleHomeScreen.kt`

**ุงูุชุนุฏููุงุช ุงููุทููุจุฉ:**

1. **ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุญุงูุฉ:**

   ```kotlin
   var showUpdateDialog by remember { mutableStateOf(false) }
   var updateInfo by remember { mutableStateOf<SimpleAppUpdater.UpdateInfo?>(null) }
   ```

2. **ูุญุต ุงูุชุญุฏูุซ ุนูุฏ ุจุฏุก ุงูุชุทุจูู:**

   ```kotlin
   LaunchedEffect(Unit) {
       // ุชุญุฏูุซ yt-dlp (ูุงู ููุฌูุฏุงู ูุณุจูุงู)
       JiyadDownloader.updateYtDlp(context)

       // ูุญุต ุชุญุฏูุซ ุงูุชุทุจูู (ุฌุฏูุฏ)
       val info = SimpleAppUpdater.checkForUpdate()
       if (info.hasUpdate) {
           updateInfo = info
           showUpdateDialog = true
       }
   }
   ```

3. **ุฅุถุงูุฉ ูุงูุฐุฉ ุงูุชุญุฏูุซ ุงูููุจุซูุฉ:**
   ```kotlin
   if (showUpdateDialog && updateInfo != null) {
       AlertDialog(
           title = "ุชุญุฏูุซ ุฌุฏูุฏ ูุชููุฑ! ๐"
           text = ุนุฑุถ ูุนูููุงุช ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ
           confirmButton = ุฒุฑ "ุชุญุฏูุซ ุงูุขู"
           dismissButton = ุฒุฑ "ูุงุญูุงู"
       )
   }
   ```

**ุงูููุงุตูุงุช ุงููุทููุจุฉ ูููุงูุฐุฉ:**

- ุฎุท ูุจูุฑ: 20-24sp
- ุฒุฑ "ุชุญุฏูุซ ุงูุขู" ูุงุถุญ ุฌุฏุงู
- ุนุฑุถ ุฑูู ุงูุฅุตุฏุงุฑ ุงููุฏูู ูุงูุฌุฏูุฏ
- ุนุฑุถ ููุงุญุธุงุช ุงูุฅุตุฏุงุฑ (Release Notes)

---

### ุงููุฑุญูุฉ 3: ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุจูุงุก

#### 3.1 ููู ูุธุงู ุงูุฅุตุฏุงุฑุงุช ูู Android

**ุงููููุน:** `app/build.gradle.kts`

**ุงููุชุบูุฑุงุช ุงููููุฉ:**

```kotlin
defaultConfig {
    versionCode = 1         // ุฑูู ุฏุงุฎูู (ูุฒูุฏ ุจู 1 ูู ูุฑุฉ)
    versionName = "1.0.0"   // ุฑูู ูุฑุงู ุงููุณุชุฎุฏู
}
```

**ููุงุนุฏ ุงูุชุญุฏูุซ:**

- `versionCode`: ูุฌุจ ุฃู ูุฒูุฏ ุฏุงุฆูุงู (1, 2, 3, ...)
- `versionName`: ุฑูู ุธุงูุฑ ูููุณุชุฎุฏู (1.0.0, 1.0.1, 1.1.0, ...)

**ุฃูุซูุฉ:**

```
ุงูุฅุตุฏุงุฑ ุงูุฃูู:
versionCode = 1
versionName = "1.0.0"

ุชุญุฏูุซ ุจุณูุท:
versionCode = 2
versionName = "1.0.1"

ุชุญุฏูุซ ูุชูุณุท:
versionCode = 3
versionName = "1.1.0"

ุชุญุฏูุซ ูุจูุฑ:
versionCode = 4
versionName = "2.0.0"
```

---

### ุงููุฑุญูุฉ 4: ุฅูุดุงุก Keystore ููุชูููุน

#### 4.1 ููุงุฐุง ุงูู Keystore ููู ุฌุฏุงูุ

**ุงูุญูููุฉ ุงูุตุงุฏูุฉ:**

- Android ูู ููุจู ุชุญุฏูุซ ุงูุชุทุจูู ุฅุฐุง ูุงู ูููุนุงู ุจููุชุงุญ ูุฎุชูู
- ุถูุงุน ุงูู Keystore = **ูุง ูููู ุฅุฑุณุงู ุชุญุฏูุซุงุช ุฃุจุฏุงู**
- ุงููุณุชุฎุฏููู ุณูุถุทุฑูู ูุญุฐู ุงูุชุทุจูู ูุฅุนุงุฏุฉ ุชุซุจูุชู

#### 4.2 ุฅูุดุงุก Keystore (ูุฑุฉ ูุงุญุฏุฉ ููุท)

**ุนุจุฑ Android Studio:**

1. Build โ Generate Signed Bundle/APK
2. ุงุฎุชุฑ APK
3. Create new... (ุฅุฐุง ูู ููู ูุฏูู keystore)
4. ุงููุฃ ุงูุจูุงูุงุช:
   ```
   Key store path: ุงุฎุชุฑ ููุงู ุขูู (ูุซูุงู: C:\Code\jiyad\jiyad-keystore.jks)
   Password: ูููุฉ ูุฑูุฑ ูููุฉ (ุงุญูุธูุง!)
   Key alias: jiyad
   Key password: ููุณ ูููุฉ ุงููุฑูุฑ ุฃู ูุฎุชููุฉ
   Validity: 25 years (ุญุชู ูุง ุชูุชูู ุตูุงุญูุชู)
   Certificate:
     - First and Last Name: ุงุณูู
     - Organization: ุงุฎุชูุงุฑู
     - City: ูุฏููุชู
     - Country Code: SA
   ```

**โ๏ธ ุงุญูุธ ูุฐู ุงููุนูููุงุช ุจุดูู ุขูู:**

- ููู `.jks`
- ูููุฉ ูุฑูุฑ Keystore
- ูููุฉ ูุฑูุฑ Key
- ุงุณู ุงูู Alias

**ุฃูู ุชุญูุธูุงุ**

- Google Drive (ูุฌูุฏ ุฎุงุต)
- Password Manager (1Password, Bitwarden)
- ููู ูุตู ูุดูุฑ

---

### ุงููุฑุญูุฉ 5: ุจูุงุก APK ููููุน

#### 5.1 ุงูุจูุงุก ุนุจุฑ Android Studio

**ุงูุฎุทูุงุช:**

1. Build โ Generate Signed Bundle/APK
2. ุงุฎุชุฑ APK
3. ุงุฎุชุฑ Keystore (ุงูุฐู ุฃูุดุฃุชู)
4. ุฃุฏุฎู ูููุงุช ุงููุฑูุฑ
5. ุงุฎุชุฑ Build Variant: **release**
6. ุงูุชุธุฑ ุงูุจูุงุก

**ุงููุงุชุฌ:**

```
app/build/outputs/apk/release/app-release.apk
ุงูุญุฌู: ~20-25 MB
```

#### 5.2 ุงูุจูุงุก ุนุจุฑ Command Line (ูุชูุฏู)

```bash
# ุชุฃูุฏ ูู ูุฌูุฏ ููู keystore.properties ูู ุฌุฐุฑ ุงููุดุฑูุน
# ูุญุชูู ุนูู:
# storeFile=C:/Code/jiyad/jiyad-keystore.jks
# storePassword=your_password
# keyAlias=jiyad
# keyPassword=your_password

./gradlew assembleRelease

# ุงููุงุชุฌ ูู:
# app/build/outputs/apk/release/app-release.apk
```

---

### ุงููุฑุญูุฉ 6: ูุดุฑ Release ุนูู GitHub

#### 6.1 ุฅูุดุงุก Release ุฌุฏูุฏ

**ุงูุฎุทูุงุช ุนูู GitHub:**

1. **ุงุฐูุจ ููุณุชูุฏุนู:**

   ```
   https://github.com/YOUR_USERNAME/jiyad
   ```

2. **ุงุถุบุท ุนูู "Releases":**

   ```
   ูู ุงูุดุฑูุท ุงูุฌุงูุจู โ Releases โ Draft a new release
   ```

3. **ุงููุฃ ุงูุจูุงูุงุช:**

   ```
   Tag version: v1.0.1
   (ูุฌุจ ุฃู ูุทุงุจู versionName ูู build.gradle.kts)

   Release title: ุฌูุงุฏ v1.0.1 - ุชุญุณููุงุช ุงูุฃุฏุงุก

   Description:
   ## ูุง ุงูุฌุฏูุฏ ูู ูุฐุง ุงูุฅุตุฏุงุฑ
   - ุชุญุณูู ุณุฑุนุฉ ุงูุชุญููู
   - ุฅุตูุงุญ ูุดููุฉ ุงูุฃููููุฉ
   - ุฏุนู ุฃูุถู ููุฑูุงุจุท ุงููุตูุฑุฉ

   ## ุงูุชุซุจูุช
   ุญููู ููู APK ุฃุฏูุงู ูุซุจูุชู ุนูู ูุงุชูู
   ```

4. **ุฑูุน ููู APK:**

   ```
   ุงุณุญุจ ููู app-release.apk ุฅูู ูุณู "Attach binaries"
   ุฃู ุงุถุบุท "Choose files" ูุงุฎุชุฑู
   ```

5. **ุงููุดุฑ:**
   ```
   ุงุถุบุท "Publish release"
   ```

**ุงููุชูุฌุฉ:**

- ุฑุงุจุท ุงูู Release: `https://github.com/YOUR_USERNAME/jiyad/releases/tag/v1.0.1`
- ุฑุงุจุท ุงูุชุญููู ุงููุจุงุดุฑ: `https://github.com/YOUR_USERNAME/jiyad/releases/download/v1.0.1/app-release.apk`

---

### ุงููุฑุญูุฉ 7: ุงุฎุชุจุงุฑ ูุธุงู ุงูุชุญุฏูุซุงุช

#### 7.1 ุณููุงุฑูู ุงูุงุฎุชุจุงุฑ ุงููุงูู

**ุงูุฅุนุฏุงุฏ:**

1. ุซุจูุช ุฅุตุฏุงุฑ v1.0.0 ุนูู ูุงุชู
2. ุฃูุดุฆ Release v1.0.1 ุนูู GitHub
3. ุชุฃูุฏ ูู ุชุญุฏูุซ `GITHUB_API_URL` ูู ุงูููุฏ

**ุงูุงุฎุชุจุงุฑ:**

```
1. ุงูุชุญ ุงูุชุทุจูู (v1.0.0)
   โ
2. ุงูุชุธุฑ 2-3 ุซูุงูู
   โ
3. ูุฌุจ ุฃู ุชุธูุฑ ูุงูุฐุฉ "ุชุญุฏูุซ ุฌุฏูุฏ ูุชููุฑ!"
   โ
4. ุงุถุบุท "ุชุญุฏูุซ ุงูุขู"
   โ
5. ููุชุญ ุงููุชุตูุญ ุนูู ุฑุงุจุท GitHub
   โ
6. ุญููู ุงูู APK
   โ
7. ุซุจูุช ุงูุชุญุฏูุซ
   โ
8. ุงูุชุญ ุงูุชุทุจูู
   โ
9. ุชุญูู: Settings โ About โ Version = 1.0.1
```

**ุงููุชููุน:**

- โ ุงููุงูุฐุฉ ุชุธูุฑ ุชููุงุฆูุงู
- โ ุงูุฑุงุจุท ูุนูู
- โ ุงูุชุซุจูุช ูุนูู ุจุฏูู ูุดุงูู
- โ ุงูุจูุงูุงุช ูุงูุฅุนุฏุงุฏุงุช ูู ุชูุญุฐู

**ุฅุฐุง ูู ูุนูู:**

- ุชุญูู ูู `GITHUB_API_URL` (ุตุญูุญุ)
- ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุงูุญุต Logcat ููุฃุฎุทุงุก: `adb logcat | grep SimpleUpdater`

---

## ๐ ุณูุฑ ุงูุนูู ุงููุณุชูุจูู (Workflow)

### ุนูุฏ ุฅุตุฏุงุฑ ุชุญุฏูุซ ุฌุฏูุฏ:

```
1. ุชุนุฏูู ุงูููุฏ (ุฅุตูุงุญุงุช/ููุฒุงุช ุฌุฏูุฏุฉ)
   โ
2. ุชุญุฏูุซ versionCode + versionName ูู build.gradle.kts
   โ
3. ุจูุงุก APK ููููุน (ุจุงุณุชุฎุฏุงู ููุณ Keystore)
   โ
4. ุงุฎุชุจุงุฑ ุงูู APK ุนูู ูุงุชู
   โ
5. ุฅูุดุงุก Release ุนูู GitHub
   โ
6. ุฑูุน ุงูู APK
   โ
7. ูุดุฑ ุงูู Release
   โ
8. ุงููุณุชุฎุฏููู ูุชูููู ุงูุฅุดุนุงุฑ ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุชุทุจูู
```

**ุงูููุช ุงููุทููุจ:** 15-30 ุฏูููุฉ

---

## โ๏ธ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### โ ุฃุฎุทุงุก ูุฌุจ ุชุฌูุจูุง:

1. **ูุณูุงู ุชุญุฏูุซ versionName:**

   ```
   ุงููุดููุฉ: ุงูููุฏ ุฌุฏูุฏ ููู versionName ูุฏูู
   ุงููุชูุฌุฉ: ูู ูุธูุฑ ุฅุดุนุงุฑ ุงูุชุญุฏูุซ
   ุงูุญู: ุฏุงุฆูุงู ุญุฏูุซ versionName ูุจู ุงูุจูุงุก
   ```

2. **ุงุณุชุฎุฏุงู Keystore ูุฎุชูู:**

   ```
   ุงููุดููุฉ: ุจููุช ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ุจููุชุงุญ ูุฎุชูู
   ุงููุชูุฌุฉ: "App not installed" ุนูุฏ ุงูุชุญุฏูุซ
   ุงูุญู: ุงุณุชุฎุฏู ููุณ ุงูู Keystore ุฏุงุฆูุงู
   ```

3. **Tag ุนูู GitHub ูุฎุชูู ุนู versionName:**

   ```
   ุงููุดููุฉ: ูู ุงูููุฏ v1.0.1ุ ุนูู GitHub v1.1.0
   ุงููุชูุฌุฉ: ุงูููุงุฑูุฉ ุฎุงุทุฆุฉ
   ุงูุญู: ูุฌุจ ุฃู ูุชุทุงุจูุง ุชูุงูุงู
   ```

4. **ุฑูุน ููู APK ุบูุฑ ูููุน:**
   ```
   ุงููุดููุฉ: ุฑูุนุช app-debug.apk ุจุฏูุงู ูู app-release.apk
   ุงููุชูุฌุฉ: ุงููุณุชุฎุฏููู ูู ูุณุชุทูุนูุง ุงูุชุซุจูุช
   ุงูุญู: ุชุฃูุฏ ูู ุงูุจูุงุก ุจูุถุน Release
   ```

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ูุดุฑ ุฃู ุชุญุฏูุซ:

- [ ] `SimpleAppUpdater.kt` ููุฌูุฏ ูู ูุฌูุฏ `simple/`
- [ ] `GITHUB_API_URL` ูุญุฏุซ ุจุฑุงุจุท ูุณุชูุฏุนู
- [ ] ูุงูุฐุฉ ุงูุชุญุฏูุซ ูุถุงูุฉ ูู `SimpleHomeScreen.kt`
- [ ] `versionCode` ุฒุงุฏ ุจููุฏุงุฑ 1
- [ ] `versionName` ูุญุฏุซ (ูุซูุงู 1.0.0 โ 1.0.1)
- [ ] Keystore ูุญููุธ ุจุฃูุงู (ูุณุฎุฉ ุงุญุชูุงุทูุฉ)
- [ ] APK ูููููุน ุจููุณ ุงูู Keystore
- [ ] APK ููุฎุชุจุฑ ุนูู ูุงุชู ุญูููู
- [ ] Tag ุนูู GitHub ูุทุงุจู versionName
- [ ] Release Notes ูุงุถุญุฉ ููููุฏุฉ
- [ ] ููู APK ูุฑููุน ูู Assets
- [ ] Release ููุดูุฑ (Published)

---

## ๐ ุงูุฎูุงุตุฉ

**ูุง ุชู ุฅุถุงูุชู:**

- โ ูุธุงู ุชุญุฏูุซุงุช ุชููุงุฆู ูุฌุงูู 100%
- โ ุฅุดุนุงุฑ ูููุณุชุฎุฏููู ุนูุฏ ุชููุฑ ุชุญุฏูุซ
- โ ูุง ุญุงุฌุฉ ูุณูุฑูุฑ (GitHub ูุงูู)
- โ ููุฏ ูุนุฒูู (Fork ุฌุฑุงุญู)

**ุงููููุงุช ุงูุฌุฏูุฏุฉ:**

1. `simple/SimpleAppUpdater.kt` (~100 ุณุทุฑ)

**ุงููููุงุช ุงููุนุฏูุฉ:**

1. `simple/SimpleHomeScreen.kt` (ุฅุถุงูุฉ LaunchedEffect + Dialog)

**ุงูุชูููุฉ:**

- ุงููุงููุฉ: $0
- ุงูููุช: 30 ุฏูููุฉ ููุฅุนุฏุงุฏ ุงูุฃููู
- ุงูุตูุงูุฉ: 15 ุฏูููุฉ ููู ุชุญุฏูุซ

---

**ุงูุขู ุฃุตุจุญ ุชุทุจูู ุฌูุงุฏ ูุงุฏุฑุงู ุนูู ุชุญุฏูุซ ููุณู ุชููุงุฆูุงู! ๐**
